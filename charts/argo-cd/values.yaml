argo-cd:
  dex:
    enabled: false
  server:
    ingress:
      enabled: true
      ingressClassName: nginx
      hosts: 
        - argo.collins.home
      annotations:
        nginx.ingress.kubernetes.io/whitelist-source-range: 192.168.1.0/24
    extraArgs:
      - --insecure
    config:
      repositories: |
        - type: helm
          name: argo-cd
          url: https://argoproj.github.io/argo-helm
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
  notifications:
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
    notifiers:
      service.pushover: |
        token: $pushover-token
    subscriptions:
      - recipients:
          - pushover:ue34qmoBG3HDvYJ55LjdUSyZFBeufG
        triggers:
          - on-sync-running
    triggers:
      trigger.on-sync-running: |
        - description: Application is being synced
          send:
          - app-sync-running
          when: app.status.operationState.phase in ['Running']
    templates:
      template.app-sync-running: |
        message: |
          The sync operation of application {{.app.metadata.name}} has started at {{.app.status.operationState.startedAt}}.
          Sync operation details are available at: {{.context.argocdUrl}}/applications/{{.app.metadata.name}}?operation=true .
    secret:
      create: false
  repoServer:
    env:
      - name: ARGOCD_GPG_ENABLED
        value: 'false'
    containerSecurityContext:
      seccompProfile:
        type: Unconfined